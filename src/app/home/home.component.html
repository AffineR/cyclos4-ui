<page-layout #pageLayout [ready]="content$ | async" hideMenu>
  <ng-container *ngIf="login.user; else guest">
    <ng-container *ngTemplateOutlet="dashboardTpl; context: {$implicit: layout.gtmd$ | async}"></ng-container>
    <page-content>
      <div [innerHTML]="content$.value | trust"></div>
    </page-content>
  </ng-container>
</page-layout>

<ng-template #guest>
  <ng-container *ngTemplateOutlet="dashboardTpl; context: {$implicit: layout.ltlg$ | async}"></ng-container>
  <page-content [heading]="(layout.gtmd$ | async) ? title : null">
    <div [innerHTML]="content$.value | trust"></div>
  </page-content>
</ng-template>

<ng-template #dashboardTpl let-showTitle>
  <page-content *ngIf="(layout.ltmd$ | async) || login.user" [heading]="showTitle ? title : null">
    <dashboard [sideAreaVisible]="pageLayout.sideAreaVisible | async"></dashboard>
  </page-content>
</ng-template>
