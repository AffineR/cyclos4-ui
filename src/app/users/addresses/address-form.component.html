<form [formGroup]="form"
  fxLayout="column">
  <h1 class="no-top-margin">{{ title }}</h1>
  <mat-form-field>
    <input matInput
      formControlName="name"
      required
      focused
      [placeholder]="messages.name()" />
    <mat-error>
      {{ form.get('name').getError('message') }}
    </mat-error>
  </mat-form-field>
  <ng-container *ngFor="let field of data.enabledFields; let first = first">
    <ng-container>
      <mat-form-field *ngIf="field == 'country'; else addressField"
        fxFlex="grow">
        <mat-select [formControlName]="field"
          [required]="data.requiredFields.includes(field)"
          [placeholder]="fieldLabel(field)">
          <mat-option></mat-option>
          <mat-option *ngFor="let country of countriesResolve.data | async"
            [value]="country.code">
            {{ country.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <ng-template #addressField>
        <mat-form-field fxFlex="grow">
          <input matInput
            [formControlName]="field"
            [required]="data.requiredFields.includes(field)"
            [placeholder]="fieldLabel(field)" />
        </mat-form-field>
      </ng-template>
    </ng-container>
  </ng-container>
  <mat-checkbox *ngIf="managePrivacy"
    formControlName="hidden">{{ messages.addressPrivate() }}</mat-checkbox>
  <confirmation-password *ngIf="data.confirmationPasswordInput"
    formControlName="confirmationPassword"
    [passwordInput]="data.confirmationPasswordInput"
    [message]="messages.addressConfirmationPassword"></confirmation-password>
  <actions root
    buttonSpace="equidistant">
    <button mat-raised-button
      color="accent"
      [disabled]="!form.valid"
      (click)="save()">{{ messages.save() }}</button>
    <button mat-raised-button
      (click)="dialogRef.close()">{{ messages.cancel() }}</button>
  </actions>
</form>
