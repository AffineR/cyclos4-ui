<page-layout [ready]="data$ | async">
  <ng-container *ngIf="data then content"></ng-container>
</page-layout>

<ng-template #content>
  <transaction-filters [heading]="i18n.transaction.title.authorizations"
    [mobileHeading]="i18n.transaction.mobileTitle.authorizations"
    [form]="form" [data]="data" [statusOptions]="statusOptions"
    [transferFilters]="transferFilters$ | async">
  </transaction-filters>
  <results-layout resultType="list" [results]="results$ | async"
    (update)="update($event)" [toLink]="toLink">

    <mobile-result *mobileResult="let row"
      [avatarImage]="bankingHelper.avatarImage(row.related)"
      [avatarIcon]="bankingHelper.avatarIcon(row.related)" [date]="row.date"
      [amount]="row.amount" [currency]="currencies.get(row.currency)"
      forceSign>
      <div class="cell-text cell-main">
        {{ bankingHelper.subjectName(row.related) }}
      </div>
    </mobile-result>

    <table *resultTable class="table table-hover cursor-pointer">
      <thead>
        <th class="avatar"></th>
        <th>{{ i18n.general.date }}</th>
        <th>{{ i18n.transaction.fromTo }}</th>
        <th>{{ i18n.transaction.scheduling }}</th>
        <th class="amount">{{ i18n.transaction.amount }}</th>
      </thead>
      <tbody>
        <ng-container *ngFor="let row of (results$ | async)?.results">
          <tr (click)="router.navigate(bankingHelper.transactionPath(row))">
            <td class="avatar">
              <avatar [image]="bankingHelper.avatarImage(row.related)"
                [icon]="bankingHelper.avatarIcon(row.related)">
              </avatar>
            </td>
            <td>
              <a [routerLink]="bankingHelper.transactionPath(row)">
                {{ row.date | date }}
              </a>
            </td>
            <td>
              <a [routerLink]="bankingHelper.transactionPath(row)">
                {{ bankingHelper.subjectName(row.related) }}
              </a>
            </td>
            <td>
              <a class="d-inline-block"
                [routerLink]="bankingHelper.transactionPath(row)">
                {{ bankingHelper.scheduling(row) }}
              </a>
            </td>
            <td class="amount" [ngClass]="{'pb-0': layout.xxs$ | async}">
              <a [routerLink]="bankingHelper.transactionPath(row)" [ngClass]="{
                  positive: format.isPositive(row.amount),
                  negative: format.isNegative(row.amount)
                }">
                {{ row.amount | currency:currencies.get(row.currency):true }}
              </a>
            </td>
          </tr>
        </ng-container>
      </tbody>
    </table>
  </results-layout>
</ng-template>
